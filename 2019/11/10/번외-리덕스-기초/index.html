
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="공부방">
    <title>(번외) 리덕스 기초 - 공부방</title>
    <meta name="author" content="dajyu">
    
        <meta name="keywords" content="React,Typescript,HTML,CSS,Frontend,">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"dajyu","sameAs":["https://github.com/cok2exe","http://stackoverflow.com/cok2exe"],"image":"cat.jpeg"},"articleBody":"리덕스를 사용할 때는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성해야 한다. 이 코드들을 각각 다른 파일에 작성하는 방법도 있고, 기능별로 묶어서 파일 하나에 작성하는 방법도 있다.\n\n\n리덕스 파일 구조\n일반적인 구조actions, constants, reducers 라는 세 개의 디렉터리를 만들고 그 안에 기능별로 파일을 하나씩 만드는 방식이다. 종류에 따라 다른 파일에 작성하여 정리할 수 있어서 편리하지만, 새로운 액션을 만들 때마다 세 종류의 파일을 모두 수정해야 하기 때문에 불편하기도 함.\n\n12345678actions  &gt; counter.js  &gt; todos.jsconstants  &gt; ActionTypes.jsreducers  &gt; counter.js  &gt; todos.js\n\n\nDucks 패턴 구조액션 타입, 액션 생성 함수, 리듀서 함수를 기능별로 파일 하나에 몰아서 다 작성하는 방식이다.\n\n123modules  &gt; counter.js  &gt; todos.js\n\n액션 타입 정의가장 먼저 액션 타입을 정의해준다. 액션 타입은 대문자로 정의하고, 문자열 내용은 ‘모듈 이름/액션 이름’과 같은 형태로 작성한다. 문자열 안에 모듈 이름을 넣음으로써, 나중에 프로젝트가 커졌을 때 액션 이름이 충돌되지 않게 해준다.\n액션 생성 함수 만들기export 를 붙여주어 다른 파일에서 불러와 사용할 수 있도록 해준다.\n12export const increase = () =&gt; (&#123; type: INCREASE &#125;);export const decrease = () =&gt; (&#123; type: DECREASE &#125;);\n\n초기 상태 및 리듀서 함수 만들기\n리액트 애플리케이션에 리덕스 적용하기1. 스토어 만들기12345import &#123; createStore &#125; from &apos;redux&apos;;...import rootReducer from &apos;./modules&apos;;const store = createStore(rootReducer)\n\n2. Provider 컴포넌트를 사용하여 프로젝트에 리덕스 적용하기리액트 컴포넌트에서 스토어를 사용할 수 있도록 루트 컴포넌트를 react-redux에서 제공하는 Provider 컴포넌트로 감싸준다.\n123456789101112import &#123; createStore &#125; from &apos;redux&apos;;import &#123; Provider &#125; from &apos;react-redux&apos;;...import rootReducer from &apos;./modules&apos;;const store = createStore(rootReducer);ReactDOM.render(  &lt;Provider store=&#123;store&#125;&gt;    &lt;App /&gt;  &lt;/Provider&gt;,  document.getElementById(&apos;root&apos;);)\n\n컴포넌트를 리덕스와 연동react-redux에서 제공하는 connect 함수를 사용한다.\n1connect(mapStateToProps, mapDispatchToProps)(연동할 컴포넌트)\n\nmapStateToProps는 리덕스 스토어 안의 상태를 컴포넌트의 props로 넘겨주기 위해 설정하는 함수이고,mapDispatchToProps는 액션 생성 함수를 컴포넌트의 props로 넘겨주기 위해 사용하는 함수이다.아래처럼 표현도 가능\n12const makeContainer = connect(mapStateToProps, mapDispatchToProps)makeContainer(타깃 컴포넌트)\n\n컴포넌트에서 액션을 디스패치하기 위해 각 액션 생성 함수를 호출하고 dispatch로 감싸는 작업이 조금 번거로울 수 있다. 특히 액션 생성 함수의 개수가 많아진다면 더더욱 그럴 것이다. 이와 같은 경우에는 리덕스에서 제공하는 bindActionCreators 유틸 함수를 사용하면 간편해진다.\n12345678const mapDispatchToProps = dispatch =&gt; (&#123;  increase: () =&gt; &#123;    dispatch(increase());  &#125;,  decrease: () =&gt; &#123;    dispatch(decrease());  &#125;&#125;);\n\n를 dispatch를 일일히 붙여주지 않고, 아래처럼 쓸 수 있다.\n12345678const mapDispatchToProps = dispatch =&gt;  bindActionCreators(    &#123;      increase,      decrease    &#125;,    dispatch  );\n\n위 방법보다 더 편한 방법이 있다. mapDispatchToProps에 해당하는 파라미터를 함수 형태가 아닌 액션 생성 함수로 이루어진 객체 형태로 넣어 주는 것이다.\n123456789export default connect(  state =&gt; (&#123;    number: state.counter.number  &#125;),  &#123;    increase,    decrease  &#125;)(CounterContainer)\n\n\n리덕스를 라이브러리를 사용하여 더 편하게 사용할 수 있다.\nredux-actions액션 생성 함수를 더 짧은 코드로 작성할 수 있다. 그리고 리듀서를 작성할 때도 switch/case 문이 아닌 handleActions라는 함수를 사용하여 각 액션마다 업데이트 함수를 설정하는 형식으로 작성해 줄 수 있다.\n12export const increase = () =&gt; (&#123; type: INCREASE &#125;);export const decrease = () =&gt; (&#123; type: DECREASE &#125;);\n\n=&gt;\n12export const increase = createAction(INCREASE);export const decrease = createAction(DECREASE);\n\n1234567891011121314function counter(state = initialState, action) &#123;  switch (action.type) &#123;    case INCREASE:      return &#123;        number: state.number + 1      &#125;;    case DECREASE:      return &#123;        number: state.number - 1      &#125;;    default:      return state;  &#125;&#125;\n\n=&gt;\n1234567const counter = handleActions(  &#123;    [INCREASE]: (state, action) =&gt; (&#123; number: state.number + 1 &#125;),    [DECREASE]: (state, action) =&gt; (&#123; number: state.number - 1 &#125;)  &#125;,  initialState);\n\nhandleActions 함수의 첫 번째 파라미터에는 각 액션에 대한 업데이트 함수를 넣어 주고, 두 번째 파라미터에는 초기 상태를 넣어 준다.\ncreateAction으로 액션을 만들면 액션에 필요한 추가 데이터는 payload라는 이름을 사용한다.\n1234export const changeInput = input =&gt; (&#123;  type: CHANGE_INPUT,  input&#125;);\n\n=&gt;\n1export const changeInput = createAction(CHANGE_INPUT, input =&gt; input);\n\n이후 handleActions 로 리듀서를 작성할 때 action.payload로 불러와야 한다.\n12345(...)[CHANGE_INPUT]: (state, action) =&gt; (&#123;...state, input: action.payload&#125;)(...)\n\n이렇게하면 헷갈릴 수 있으므로, 아래와 같이 수정할 수 있다.\n12345(...)[CHANGE_INPUT]: (state, &#123; payload: input &#125;) =&gt; (&#123;...state, input&#125;)(...)\n\nimmer리듀서에서 상태를 업데이트할 때는 불변성을 지켜야 하기 때문에 spread 연산자 등을 사용하였다. 그러나 모듈의 상태가 복잡해질수록 불변성을 지키기가 까다로워 진다.모듈을 설계할 때 객체의 깊이가 너무 깊어지지 않도록 주의해야 한다.\n객체의 구조가 복잡해지거나 객체로 이루어진 배열을 다룰 경우, immer를 사용하면 훨씬 더 편리하게 상태를 관리할 수 있다.하지만, 단순한 코드들로 이루어진 리듀서에 immer를 사용하면 오히려 코드가 더 길어지기 때문에 적절하게 사용하는 것이 중요하다.\nHooks를 사용하여 컨테이너 컴포넌트 만들기리덕스 스토어와 연동된 컨테이너 컴포넌트를 만들 때 connect 함수를 사용하는 대신 react-redux에서 제공하는 Hooks를 사용할 수도 있다.\n\nuseSelector로 상태 조회하기useSelector Hook을 사용하면 connect 함수를 사용하지 않고도 리덕스의 상태를 조회할 수 있다.\n\n1const 결과 = useSelector(상태 선택 함수);\n\n상태 선택 함수는 mapStateToProps와 형태가 똑같다.\n\nuseDispatch를 사용하여 액션 디스패치 하기이 Hook은 컴포넌트 내부에서 스토어의 내장 함수 dispatch를 사용할 수 있게 해준다.\n\n12const dispatch = useDispatch();dispatch(&#123; type: &apos;SAMPLE_ACTION&apos; &#125;);\n\n컴포넌트 성능을 최적화해야 하는 상황이 온다면 useCallback으로 액션을 디스패치하는 함수를 감싸주는 것이 좋다.useDispatch를 사용할 때는 useCallback과 함께 사용하는 습관을 들일 것을 권한다.\n\nuseStore를 사용하여 리덕스 스토어 사용하기useStore Hooks를 사용하면 컴포넌트 내부에서 리덕스 스토어 객체를 직접 사용할 수 있다.\n\n123const store = useStore();store.dispatch(&#123; type: &apos;SAMPLE_ACTION&apos; &#125;);store.getStore();\n\nuseStore는 컴포넌트에서 정말 어쩌다가 스토어에 직접 접근해야 하는 상황에만 사용해야 한다. (이런 상황은 흔치 않음)\n\nconnect와 useSelector, useDispatch 주요 차이점\n\n\nconnect 함수를 사용하여 컨테이너 컴포넌트를 만들었을 경우, 해당 컨테이너 컴포넌트의 부모 컴포넌트가 리렌더링될 때 해당 컨테이너 컴포넌트의 props가 바뀌지 않았다면 리렌더링이 자동으로 방지되어 성능이 최적화 됨\n\n\nuseSelector를 사용하여 리덕스 상태를 조회했을 때는 이 최적화 작업이 자동으로 이루어지지 않으므로, 성능 최적화를 위해서는 React.memo를 컨테이너 컴포넌트에 사용해 주어야 한다.\n\n1export default React.memo(TodosContainer);\n\n참고: 리액트를 다루는 기술 개정판 (저자: velopert 김민준)\n","dateCreated":"2019-11-10T15:34:53+09:00","dateModified":"2019-11-10T17:19:58+09:00","datePublished":"2019-11-10T15:34:53+09:00","description":"리덕스를 사용할 때는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성해야 한다. 이 코드들을 각각 다른 파일에 작성하는 방법도 있고, 기능별로 묶어서 파일 하나에 작성하는 방법도 있다.","headline":"(번외) 리덕스 기초","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"},"publisher":{"@type":"Organization","name":"dajyu","sameAs":["https://github.com/cok2exe","http://stackoverflow.com/cok2exe"],"image":"cat.jpeg","logo":{"@type":"ImageObject","url":"cat.jpeg"}},"url":"https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/","keywords":"React, Redux"}</script>
    <meta name="description" content="리덕스를 사용할 때는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성해야 한다. 이 코드들을 각각 다른 파일에 작성하는 방법도 있고, 기능별로 묶어서 파일 하나에 작성하는 방법도 있다.">
<meta name="keywords" content="React,Redux">
<meta property="og:type" content="blog">
<meta property="og:title" content="(번외) 리덕스 기초">
<meta property="og:url" content="https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/index.html">
<meta property="og:site_name" content="공부방">
<meta property="og:description" content="리덕스를 사용할 때는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성해야 한다. 이 코드들을 각각 다른 파일에 작성하는 방법도 있고, 기능별로 묶어서 파일 하나에 작성하는 방법도 있다.">
<meta property="og:locale" content="ko">
<meta property="og:updated_time" content="2019-11-10T08:19:58.450Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="(번외) 리덕스 기초">
<meta name="twitter:description" content="리덕스를 사용할 때는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성해야 한다. 이 코드들을 각각 다른 파일에 작성하는 방법도 있고, 기능별로 묶어서 파일 하나에 작성하는 방법도 있다.">
    
    
        
    
    
        <meta property="og:image" content="https://cok2exe.github.io/assets/images/cat.jpeg"/>
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/assets/css/all.css">
    <link rel="stylesheet" href="/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/assets/css/thumbs.css">
    <link rel="stylesheet" href="/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/ "
            aria-label=""
        >
            공부방
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
            <img class="header-picture" src="/assets/images/cat.jpeg" alt="저자 이미지"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="저자에 대해 더 알아보기"
                >
                    <img class="sidebar-profile-picture" src="/assets/images/cat.jpeg" alt="저자 이미지"/>
                </a>
                <h4 class="sidebar-profile-name">dajyu</h4>
                
                    <h5 class="sidebar-profile-bio"><p>혼잣말 공부러(코드사냥꾼)</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="/ "
                            
                            title="Home"
                        >
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link "
                             href="#about"
                            
                            title="About"
                        >
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="https://github.com/cok2exe" target="_blank" rel="noopener" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a  class="sidebar-button-link " href="http://stackoverflow.com/cok2exe" target="_blank" rel="noopener" title="Stack Overflow">
                    
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            (번외) 리덕스 기초
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-11-10T15:34:53+09:00">
	
		    2019/11/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/React/">React</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <p>리덕스를 사용할 때는 액션 타입, 액션 생성 함수, 리듀서 코드를 작성해야 한다. 이 코드들을 각각 다른 파일에 작성하는 방법도 있고, 기능별로 묶어서 파일 하나에 작성하는 방법도 있다.</p>
<a id="more"></a>

<h3 id="리덕스-파일-구조"><a href="#리덕스-파일-구조" class="headerlink" title="리덕스 파일 구조"></a>리덕스 파일 구조</h3><ol>
<li>일반적인 구조<br>actions, constants, reducers 라는 세 개의 디렉터리를 만들고 그 안에 기능별로 파일을 하나씩 만드는 방식이다. 종류에 따라 다른 파일에 작성하여 정리할 수 있어서 편리하지만, 새로운 액션을 만들 때마다 세 종류의 파일을 모두 수정해야 하기 때문에 불편하기도 함.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">actions</span><br><span class="line">  &gt; counter.js</span><br><span class="line">  &gt; todos.js</span><br><span class="line">constants</span><br><span class="line">  &gt; ActionTypes.js</span><br><span class="line">reducers</span><br><span class="line">  &gt; counter.js</span><br><span class="line">  &gt; todos.js</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>Ducks 패턴 구조<br>액션 타입, 액션 생성 함수, 리듀서 함수를 기능별로 파일 하나에 몰아서 다 작성하는 방식이다.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">modules</span><br><span class="line">  &gt; counter.js</span><br><span class="line">  &gt; todos.js</span><br></pre></td></tr></table></figure>

<h3 id="액션-타입-정의"><a href="#액션-타입-정의" class="headerlink" title="액션 타입 정의"></a>액션 타입 정의</h3><p>가장 먼저 액션 타입을 정의해준다. 액션 타입은 대문자로 정의하고, 문자열 내용은 <em>‘모듈 이름/액션 이름’</em>과 같은 형태로 작성한다. 문자열 안에 모듈 이름을 넣음으로써, 나중에 프로젝트가 커졌을 때 액션 이름이 충돌되지 않게 해준다.</p>
<h3 id="액션-생성-함수-만들기"><a href="#액션-생성-함수-만들기" class="headerlink" title="액션 생성 함수 만들기"></a>액션 생성 함수 만들기</h3><p>export 를 붙여주어 다른 파일에서 불러와 사용할 수 있도록 해준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export const increase = () =&gt; (&#123; type: INCREASE &#125;);</span><br><span class="line">export const decrease = () =&gt; (&#123; type: DECREASE &#125;);</span><br></pre></td></tr></table></figure>

<h3 id="초기-상태-및-리듀서-함수-만들기"><a href="#초기-상태-및-리듀서-함수-만들기" class="headerlink" title="초기 상태 및 리듀서 함수 만들기"></a>초기 상태 및 리듀서 함수 만들기</h3><hr>
<h2 id="리액트-애플리케이션에-리덕스-적용하기"><a href="#리액트-애플리케이션에-리덕스-적용하기" class="headerlink" title="리액트 애플리케이션에 리덕스 적용하기"></a>리액트 애플리케이션에 리덕스 적용하기</h2><h3 id="1-스토어-만들기"><a href="#1-스토어-만들기" class="headerlink" title="1. 스토어 만들기"></a>1. 스토어 만들기</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createStore &#125; from &apos;redux&apos;;</span><br><span class="line">...</span><br><span class="line">import rootReducer from &apos;./modules&apos;;</span><br><span class="line"></span><br><span class="line">const store = createStore(rootReducer)</span><br></pre></td></tr></table></figure>

<h3 id="2-Provider-컴포넌트를-사용하여-프로젝트에-리덕스-적용하기"><a href="#2-Provider-컴포넌트를-사용하여-프로젝트에-리덕스-적용하기" class="headerlink" title="2. Provider 컴포넌트를 사용하여 프로젝트에 리덕스 적용하기"></a>2. Provider 컴포넌트를 사용하여 프로젝트에 리덕스 적용하기</h3><p>리액트 컴포넌트에서 스토어를 사용할 수 있도록 루트 컴포넌트를 react-redux에서 제공하는 Provider 컴포넌트로 감싸준다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; createStore &#125; from &apos;redux&apos;;</span><br><span class="line">import &#123; Provider &#125; from &apos;react-redux&apos;;</span><br><span class="line">...</span><br><span class="line">import rootReducer from &apos;./modules&apos;;</span><br><span class="line"></span><br><span class="line">const store = createStore(rootReducer);</span><br><span class="line">ReactDOM.render(</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;App /&gt;</span><br><span class="line">  &lt;/Provider&gt;,</span><br><span class="line">  document.getElementById(&apos;root&apos;);</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h3 id="컴포넌트를-리덕스와-연동"><a href="#컴포넌트를-리덕스와-연동" class="headerlink" title="컴포넌트를 리덕스와 연동"></a>컴포넌트를 리덕스와 연동</h3><p>react-redux에서 제공하는 <code>connect</code> 함수를 사용한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connect(mapStateToProps, mapDispatchToProps)(연동할 컴포넌트)</span><br></pre></td></tr></table></figure>

<p><code>mapStateToProps</code>는 리덕스 스토어 안의 상태를 컴포넌트의 props로 넘겨주기 위해 설정하는 함수이고,<br><code>mapDispatchToProps</code>는 액션 생성 함수를 컴포넌트의 props로 넘겨주기 위해 사용하는 함수이다.<br>아래처럼 표현도 가능</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const makeContainer = connect(mapStateToProps, mapDispatchToProps)</span><br><span class="line">makeContainer(타깃 컴포넌트)</span><br></pre></td></tr></table></figure>

<p>컴포넌트에서 액션을 디스패치하기 위해 각 액션 생성 함수를 호출하고 dispatch로 감싸는 작업이 조금 번거로울 수 있다. 특히 액션 생성 함수의 개수가 많아진다면 더더욱 그럴 것이다. 이와 같은 경우에는 리덕스에서 제공하는 <code>bindActionCreators</code> 유틸 함수를 사용하면 간편해진다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const mapDispatchToProps = dispatch =&gt; (&#123;</span><br><span class="line">  increase: () =&gt; &#123;</span><br><span class="line">    dispatch(increase());</span><br><span class="line">  &#125;,</span><br><span class="line">  decrease: () =&gt; &#123;</span><br><span class="line">    dispatch(decrease());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>를 dispatch를 일일히 붙여주지 않고, 아래처럼 쓸 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">const mapDispatchToProps = dispatch =&gt;</span><br><span class="line">  bindActionCreators(</span><br><span class="line">    &#123;</span><br><span class="line">      increase,</span><br><span class="line">      decrease</span><br><span class="line">    &#125;,</span><br><span class="line">    dispatch</span><br><span class="line">  );</span><br></pre></td></tr></table></figure>

<p>위 방법보다 더 편한 방법이 있다. mapDispatchToProps에 해당하는 파라미터를 함수 형태가 아닌 액션 생성 함수로 이루어진 객체 형태로 넣어 주는 것이다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">export default connect(</span><br><span class="line">  state =&gt; (&#123;</span><br><span class="line">    number: state.counter.number</span><br><span class="line">  &#125;),</span><br><span class="line">  &#123;</span><br><span class="line">    increase,</span><br><span class="line">    decrease</span><br><span class="line">  &#125;</span><br><span class="line">)(CounterContainer)</span><br></pre></td></tr></table></figure>

<hr>
<p>리덕스를 라이브러리를 사용하여 더 편하게 사용할 수 있다.</p>
<h3 id="redux-actions"><a href="#redux-actions" class="headerlink" title="redux-actions"></a>redux-actions</h3><p>액션 생성 함수를 더 짧은 코드로 작성할 수 있다. 그리고 리듀서를 작성할 때도 switch/case 문이 아닌 handleActions라는 함수를 사용하여 각 액션마다 업데이트 함수를 설정하는 형식으로 작성해 줄 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export const increase = () =&gt; (&#123; type: INCREASE &#125;);</span><br><span class="line">export const decrease = () =&gt; (&#123; type: DECREASE &#125;);</span><br></pre></td></tr></table></figure>

<p>=&gt;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">export const increase = createAction(INCREASE);</span><br><span class="line">export const decrease = createAction(DECREASE);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function counter(state = initialState, action) &#123;</span><br><span class="line">  switch (action.type) &#123;</span><br><span class="line">    case INCREASE:</span><br><span class="line">      return &#123;</span><br><span class="line">        number: state.number + 1</span><br><span class="line">      &#125;;</span><br><span class="line">    case DECREASE:</span><br><span class="line">      return &#123;</span><br><span class="line">        number: state.number - 1</span><br><span class="line">      &#125;;</span><br><span class="line">    default:</span><br><span class="line">      return state;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>=&gt;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const counter = handleActions(</span><br><span class="line">  &#123;</span><br><span class="line">    [INCREASE]: (state, action) =&gt; (&#123; number: state.number + 1 &#125;),</span><br><span class="line">    [DECREASE]: (state, action) =&gt; (&#123; number: state.number - 1 &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  initialState</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>handleActions 함수의 첫 번째 파라미터에는 각 액션에 대한 업데이트 함수를 넣어 주고, 두 번째 파라미터에는 초기 상태를 넣어 준다.</p>
<p>createAction으로 액션을 만들면 액션에 필요한 추가 데이터는 payload라는 이름을 사용한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export const changeInput = input =&gt; (&#123;</span><br><span class="line">  type: CHANGE_INPUT,</span><br><span class="line">  input</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>=&gt;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export const changeInput = createAction(CHANGE_INPUT, input =&gt; input);</span><br></pre></td></tr></table></figure>

<p>이후 handleActions 로 리듀서를 작성할 때 action.payload로 불러와야 한다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(...)</span><br><span class="line"></span><br><span class="line">[CHANGE_INPUT]: (state, action) =&gt; (&#123;...state, input: action.payload&#125;)</span><br><span class="line"></span><br><span class="line">(...)</span><br></pre></td></tr></table></figure>

<p>이렇게하면 헷갈릴 수 있으므로, 아래와 같이 수정할 수 있다.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">(...)</span><br><span class="line"></span><br><span class="line">[CHANGE_INPUT]: (state, &#123; payload: input &#125;) =&gt; (&#123;...state, input&#125;)</span><br><span class="line"></span><br><span class="line">(...)</span><br></pre></td></tr></table></figure>

<h3 id="immer"><a href="#immer" class="headerlink" title="immer"></a>immer</h3><p>리듀서에서 상태를 업데이트할 때는 불변성을 지켜야 하기 때문에 spread 연산자 등을 사용하였다. 그러나 모듈의 상태가 복잡해질수록 불변성을 지키기가 까다로워 진다.<br>모듈을 설계할 때 객체의 깊이가 너무 깊어지지 않도록 주의해야 한다.</p>
<p>객체의 구조가 복잡해지거나 객체로 이루어진 배열을 다룰 경우, immer를 사용하면 훨씬 더 편리하게 상태를 관리할 수 있다.<br>하지만, 단순한 코드들로 이루어진 리듀서에 immer를 사용하면 오히려 코드가 더 길어지기 때문에 적절하게 사용하는 것이 중요하다.</p>
<h3 id="Hooks를-사용하여-컨테이너-컴포넌트-만들기"><a href="#Hooks를-사용하여-컨테이너-컴포넌트-만들기" class="headerlink" title="Hooks를 사용하여 컨테이너 컴포넌트 만들기"></a>Hooks를 사용하여 컨테이너 컴포넌트 만들기</h3><p>리덕스 스토어와 연동된 컨테이너 컴포넌트를 만들 때 connect 함수를 사용하는 대신 react-redux에서 제공하는 Hooks를 사용할 수도 있다.</p>
<ol>
<li><code>useSelector</code>로 상태 조회하기<br><code>useSelector</code> Hook을 사용하면 connect 함수를 사용하지 않고도 리덕스의 상태를 조회할 수 있다.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const 결과 = useSelector(상태 선택 함수);</span><br></pre></td></tr></table></figure>

<p>상태 선택 함수는 mapStateToProps와 형태가 똑같다.</p>
<ol start="2">
<li><code>useDispatch</code>를 사용하여 액션 디스패치 하기<br>이 Hook은 컴포넌트 내부에서 스토어의 내장 함수 dispatch를 사용할 수 있게 해준다.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const dispatch = useDispatch();</span><br><span class="line">dispatch(&#123; type: &apos;SAMPLE_ACTION&apos; &#125;);</span><br></pre></td></tr></table></figure>

<p>컴포넌트 성능을 최적화해야 하는 상황이 온다면 <code>useCallback</code>으로 액션을 디스패치하는 함수를 감싸주는 것이 좋다.<br><code>useDispatch</code>를 사용할 때는 <code>useCallback</code>과 함께 사용하는 습관을 들일 것을 권한다.</p>
<ol start="3">
<li><code>useStore</code>를 사용하여 리덕스 스토어 사용하기<br><code>useStore</code> Hooks를 사용하면 컴포넌트 내부에서 리덕스 스토어 객체를 직접 사용할 수 있다.</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const store = useStore();</span><br><span class="line">store.dispatch(&#123; type: &apos;SAMPLE_ACTION&apos; &#125;);</span><br><span class="line">store.getStore();</span><br></pre></td></tr></table></figure>

<p><code>useStore</code>는 컴포넌트에서 정말 어쩌다가 스토어에 직접 접근해야 하는 상황에만 사용해야 한다. (이런 상황은 흔치 않음)</p>
<ol start="4">
<li>connect와 useSelector, useDispatch 주요 차이점</li>
</ol>
<blockquote>
<p><code>connect</code> 함수를 사용하여 컨테이너 컴포넌트를 만들었을 경우, 해당 컨테이너 컴포넌트의 부모 컴포넌트가 리렌더링될 때 해당 컨테이너 컴포넌트의 props가 바뀌지 않았다면 리렌더링이 자동으로 방지되어 성능이 최적화 됨</p>
</blockquote>
<blockquote>
<p><code>useSelector</code>를 사용하여 리덕스 상태를 조회했을 때는 이 최적화 작업이 자동으로 이루어지지 않으므로, 성능 최적화를 위해서는 React.memo를 컨테이너 컴포넌트에 사용해 주어야 한다.</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export default React.memo(TodosContainer);</span><br></pre></td></tr></table></figure>

<p>참고: <a href="http://www.yes24.com/Product/Goods/78233628?scode=032&OzSrank=1" target="_blank" rel="noopener">리액트를 다루는 기술 개정판 (저자: velopert 김민준)</a></p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">태그</span><br/>
                
    <a class="tag tag--primary tag--small t-link" href="/tags/React/">React</a> <a class="tag tag--primary tag--small t-link" href="/tags/Redux/">Redux</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/11/11/번외-리덕스-미들웨어/"
                    data-tooltip="(번외) 리덕스 미들웨어"
                    aria-label="이전: (번외) 리덕스 미들웨어"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/11/10/React-기초다지기-4-리덕스/"
                    data-tooltip="React 기초다지기 (4)-리덕스"
                    aria-label="다음: React 기초다지기 (4)-리덕스"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 dajyu. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/11/11/번외-리덕스-미들웨어/"
                    data-tooltip="(번외) 리덕스 미들웨어"
                    aria-label="이전: (번외) 리덕스 미들웨어"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/11/10/React-기초다지기-4-리덕스/"
                    data-tooltip="React 기초다지기 (4)-리덕스"
                    aria-label="다음: React 기초다지기 (4)-리덕스"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://cok2exe.github.io/2019/11/10/번외-리덕스-기초/"
                        aria-label="Google+에 공유하기"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/assets/images/cat.jpeg" alt="저자 이미지"/>
        
            <h4 id="about-card-name">dajyu</h4>
        
            <div id="about-card-bio"><p>혼잣말 공부러(코드사냥꾼)</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>Web frontend</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                Asia/Seoul
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/assets/js/jquery.js"></script>
<script src="/assets/js/jquery.fancybox.js"></script>
<script src="/assets/js/thumbs.js"></script>
<script src="/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->


    




    </body>
</html>
